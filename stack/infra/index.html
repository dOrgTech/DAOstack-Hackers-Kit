<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Infra - DAOstack Developer Portal</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Infra";
    var mkdocs_page_input_path = "stack/infra.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> DAOstack Developer Portal</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../arc2-overview/">Arc 2.0</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Stack</span></p>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Infra</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#genesis-protocol">Genesis Protocol</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#what-is-staking">What is Staking?</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#how-does-proposal-state-changes-after-staking">How does proposal state changes after staking?</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#staking-rewards">Staking Rewards</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#caveats">Caveats</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../arc/">Arc</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../subgraph/">Subgraph</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../arcjs/">Arc.js</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../alchemy/">Alchemy</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Plugins</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../plugins/nft-manager/">NFT Manager</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../plugins/funding-request/">Funding Request</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../plugins/token-trade/">Token Trade</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Tutorials</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../tutorials/create-a-dao/">Create your own DAO</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tutorials/arc-react/">Arc.react</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../tutorials/generic-plugin/">Register a generic plugin</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="#">Register a plugin in the stack</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/register-a-plugin/intro/">Intro</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/register-a-plugin/arc/">Arc</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/register-a-plugin/subgraph/">Subgraph</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/register-a-plugin/migration/">Migration</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/register-a-plugin/test-environment/">Test environment</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/register-a-plugin/arcjs/">Arc.js</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../tutorials/register-a-plugin/alchemy/">Alchemy</a>
                </li>
    </ul>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">DAOstack Developer Portal</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Stack &raquo;</li>
        
      
    
    <li>Infra</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/dOrgTech/DAOstack-Hackers-Kit/edit/master/docs/stack/infra.md"> Edit on dOrgTech/DAOstack-Hackers-Kit</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="infra">Infra</h1>
<p><a href="https://github.com/daostack/infra">Infra</a> is a Solidity smart contract library containing the core building blocks of decentralized governance. Infra contracts can be integrated into any application regardless of its architecture.</p>
<p>Infra has two main components:</p>
<ul>
<li>
<p><strong>Voting Machines</strong> - A voting machine is a universal contract which can operate the voting process for any organization. Each voting machine follows its own predefined rules for the decision making and execution process. Rules for voting machines can be implemented for any voting process, from a simple protocol like an "Absolute Vote" (where 51% of the voting power should approve it in order for the decision to pass), or more sophisticated protocols like the <a href="https://www.youtube.com/watch?v=1De0MoStSkY">Holographic Consensus</a> voting protocol.</p>
</li>
<li>
<p><strong>Voting Rights Management</strong> - A voting rights management system determines how voting rights are distributed. Any voting rights management system must have "balances" which represents the voting power each participant holds. There are 2 main approaches for managing voting rights: token-based voting and reputation-based voting. The main technical difference between the two is that tokens are transferable (i.e. tradable) while reputation is non-transferable. Another big difference which may appear (depending on implementation) is that a token is a property which cannot be taken while reputation may be redistributed by the organization itself. For most cases, we reccomend using the reputation-based voting model, however, Infra allows any voting right management system to be built.</p>
</li>
</ul>
<h2 id="genesis-protocol">Genesis Protocol</h2>
<p>Genesis Protocol is an organization's voting machine implemented by DAOstack team. It leverages the <strong>Holographic Consensus</strong> mechanism for scaling the decentralized governance system.</p>
<p>You can find details on design principals and high level overview here</p>
<p>In this article we will go through some technical details of Genesis Protocol</p>
<p>Each DAO can set the following Genesis Protocol parameters according to organization's need, while setting the scheme parameters:</p>
<ul>
<li><strong>Activation time</strong>: The point (represented in Unix time) in time when psroposing and voting are activated.</li>
<li><strong>Boosted vote period limit</strong>: The length of time that voting is open for boosted proposals.</li>
<li><strong>Dao bounty cost</strong>: This is multiplied by the average downstake on boosted proposals to calculate how large the DAOâ€™s automatic downstake should be.</li>
<li><strong>Minimum dao bounty</strong>: The minimum amount of GEN a DAO will stake when automatically downstaking each proposal.</li>
<li><strong>Pre boosted vote period limit</strong>: The length of time that a proposal must maintain a confidence score higher than the boosting threshold to become eligible for boosting.</li>
<li><strong>Proposing rep reward</strong>: The amount of voting power given out as a reward for submitting a proposal that the DAO passes.</li>
<li><strong>Queued vote period limit</strong>: The length of time that voting is open for non-boosted proposals.</li>
<li><strong>Queued vote required percentage</strong>: The quorum required to decide a vote on a non-boosted proposal.</li>
<li><strong>Quiet ending period</strong>: The length of time a voteâ€™s potential result needs to stay the same in order to be confirmed as the official result.</li>
<li><strong>Threshold const</strong>: Controls how quickly the required confidence score for boosting goes up as the number of currently boosted proposals rises.</li>
<li><strong>Voters reputation loss ratio</strong>: The percentage of a voterâ€™s voting power they stand to lose if they vote against the DAOâ€™s eventual decision on a non-boosted proposal.</li>
</ul>
<p>For more details and story around each param refer <a href="https://daostack.zendesk.com/hc/en-us/articles/360002000537-Genesis-Protocol-v0-2-Parameters-Explained">this article</a></p>
<h2 id="what-is-staking">What is Staking?</h2>
<p>For a proposal to pass with a relative majority, it must have sufficient stake in favor of the proposal.</p>
<p>You can use your <strong>GEN</strong> tokens to stake in favor of or against the proposal. Once the stakes in favor of the proposal reaches the bar it is ready to be boosted.</p>
<h2 id="how-does-proposal-state-changes-after-staking">How does proposal state changes after staking?</h2>
<p>An open proposal (i.e. with pending decision) can be in one of the following stages:</p>
<ul>
<li>
<p><strong>Queued</strong>: All proposals when submitted are in <em>queued</em> state and by default have downstake &gt; 0. This is decided by <code>minimumDaoBounty</code> parameter. The proposal requires absolute majority (i.e. &gt; 50% vote) to pass in this state.</p>
</li>
<li>
<p><strong>PreBoosted</strong>: Once the stakes in favor of the proposal crosses the boosting bar it moves from <em>queued</em> to <em>preboosted</em> state. The boosting bar is decided by following genesis parameters and current dao state.</p>
<p><code>stakes(For)/stakes(Against) &gt; (thresholdConst)^(#aready-boosted-proposals)</code></p>
<p>The proposal in this state is open for staking and can be moved back to <em>queued</em> state if the stake against is increases and the above equation becomes false.</p>
</li>
<li>
<p><strong>Boosted</strong>: Once the proposal has been in <em>preboosted</em> state for period set <code>preBoostedVotePeriodLimit</code> parameter, the proposal moves to boosted state. The proposal in this state requires relative majority to pass (i.e votes(For) &gt; votes(Against)).</p>
<p>The proposal in this state is open for voting but cannot be staked on. Thus, once a proposal is boosted it cannot be moved back to <em>queued</em> or <em>preboosted</em> state.</p>
<p>The proposal stays in this state until <code>boostedVotePeriodLimit</code> elapse.</p>
</li>
<li>
<p><strong>QuietEndingPeriod</strong>: If the winning outcome of the proposal flips from 'pass' to 'fail' or vice-versa during the last period decided by <code>quietEndingPeriod</code> parameter, then the proposal voting get extended by <code>quietEndingPeriod</code> time and the proposal enters the <em>quietEndingPeriod</em>.</p>
</li>
</ul>
<p>The proposal's outcome must not change for the <code>quietEndingPeriod</code> amount of time for the decision to be made. Else the voting on proposal keeps getting increased by the <code>quietEndingPeriod</code> amount of time until the above condition is true.</p>
<h2 id="staking-rewards">Staking Rewards</h2>
<p>Following are the possible outcomes of a proposal:</p>
<ul>
<li>
<p>The proposal expires in queue without any decision: In this case all the stakes are returned to the respective staker.</p>
</li>
<li>
<p>The proposal passes: </p>
<p><code>Staker(stake(for) amount)*daoBounty/(total winning stake)</code></p>
</li>
<li>
<p>The proposal fails: Loosing stake is lost</p>
</li>
</ul>
<h2 id="caveats">Caveats</h2>
<ul>
<li>
<p>For a given proposal one can stake multiple times from the same address. In such a case all the subsequent stakes must in align with previous stake's vote i.e. if staked in favor of the proposal earlier you must stake in favor of the proposal in subsequent stakes</p>
</li>
<li>
<p>While you can stake against the proposal in pre-boosted state, the staking stops once the proposal is in boosted state.</p>
</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../arc/" class="btn btn-neutral float-right" title="Arc">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../arc2-overview/" class="btn btn-neutral" title="Arc 2.0"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../../arc2-overview/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../arc/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
